<div ng-class="gameResult.gameEnded ? 'show': ''"
        class="modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Game ended</h2>
            </div>
            <div class="modal-body">
                <h3>The winner is {{gameResult.winnerName}}</h3>
            </div>
            <div class="modal-footer">
                <button ng-click="goBackToLobby()" class="btn btn-primary">
                    Back to lobby
                </button>
            </div>
        </div>
    </div>
</div>

<div ng-if="gameSettings == null">
    loading settings
</div>
<div ng-if="gameSettings != null">

    <!--DEBUG ACTIONS-->
    <div>
        <button ng-click="addPlayer()" class="btn btn-danger">
            Add Player
        </button>
        <button ng-click="nextPlayerTurn()" class="btn btn-danger">
            Next
        </button>
    </div>

    <div class="row room details">
        <div class="col-xs-12 text-center">
            <p>room name : {{gameSettings.gametitle}}</p>
            <p>{{state.gamePlayers.length}}/{{gameSettings.totalPlayers}}</p>
            <p>Current turn : {{state.currentPlayer}}</p>

            <!--personal game params-->
            <p>Moves: {{state.currentMove}}/{{state.maxMoves }}</p>
        </div>
    </div>

    <div class="row main">

        <!--Players panel-->
        <div class="col-xs-4 players">
            <div ng-repeat="i in getTimes(gameSettings.totalPlayers) track by $index">

                <!-- For logged in players -->
                <div ng-class="state.gamePlayers[$index].name == state.currentPlayer ? 'currently-playing':'waiting'"
                     ng-if="$index < state.gamePlayers.length">

                    {{state.gamePlayers[$index].name}}

                    <span>
                    {{state.gamePlayers[$index].score}}/100
                    </span>
                <span ng-if="state.currentPlayerIsMe($index)">
                (ME!!!)
                </span>

                </div>

                <!-- For empty player slot-->
                <div ng-if="$index >= state.gamePlayers.length">
                    ((Empty))
                </div>
            </div>
        </div>

        <!-- Grid panel -->
        <div class="col-xs-8 grid">
            <div class="blocker" ng-if="!isGameFull() || isGameFull() &&!isMyTurn()">
                <div class="inner-content">
                    <span ng-if="isGameFull()">Wait for your turn</span>
                    <span ng-if="!isGameFull()">Waiting for game to be full</span>
                    <div>
                        <i class="fa fa-spinner fa-spin"></i>
                    </div>
                </div>
            </div>

            <div class="actions">
                <button ng-if="state.currentMove <= state.maxMoves " ng-click="ColorSelection('black')">Black</button>
                <button ng-if="state.currentMove <= state.maxMoves " ng-click="ColorSelection('white')">White</button>
                <button ng-if="state.currentMove <= state.maxMoves " ng-click="ColorSelection('')">None</button>
                <button ng-if="state.currentMove > state.maxMoves " ng-click="EndTurn()" >EndTurn</button>
            </div>

            <table class="gridTable">

                <tr>
                    <th class="top-wrapper wrapper">

                    </th>

                    <th class="top-wrapper wrapper"
                        ng-repeat="columnSlice in gameSettings.columnSlices track by $index"
                        ng-click="selectColumn($index)">

                        <div class="wrapper-inner-content"
                             ng-repeat="slice in columnSlice track by $index">
                            {{slice}}
                        </div>
                    </th>
                </tr>

                <tr ng-repeat="row in grid  track by $index">

                    <th class="left-wrapper wrapper" ng-click="selectRow($index)">

                        <div class="wrapper-inner-content"
                             ng-repeat="slice in gameSettings.rowSlices[$index] track by $index">
                            {{slice}}
                        </div>
                    </th>

                    <th ng-repeat="cell in row  track by $index"
                        ng-click="onCellClicked(cell)"
                        ng-class="cell.selected? 'selected':'notselected'"
                        class="cell {{cell.color}}">
                    </th>
                </tr>
            </table>
        </div>
    </div>
</div>